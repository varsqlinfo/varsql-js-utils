!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.VARSQLUtils=t():e.VARSQLUtils=t()}(self,(()=>(()=>{"use strict";var e={754:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_END_SPLITTER=t.CREATE_END_CHECK_KEYWORD=t.DEFAULT_TEXT_CHECK_TOKEN=t.TAB_CHAR=t.LINE_CHAR=void 0;var o=r(n(784)),i=r(n(591)),u=r(n(449)),a=r(n(390)),c=r(n(660));t.LINE_CHAR="\n",t.TAB_CHAR="\t",t.DEFAULT_TEXT_CHECK_TOKEN={"'":{keepWord:!0,checkEnd:function(e,t,n){return"\\"!=e&&"'"==t}},'"':{keepWord:!0,checkEnd:function(e,t,n){return"\\"!=e&&'"'==t}},"--":{keepWord:!0,endToken:t.LINE_CHAR},"/*":{keepWord:!0,endToken:"*/"},"#{":{keepWord:!0,endToken:"}"},"${":{keepWord:!0,endToken:"}"}},t.CREATE_END_CHECK_KEYWORD={if:{end:"if"},loop:{end:"loop"},case:{end:""}},t.DEFAULT_END_SPLITTER={default:new c.default,create:new o.default,create_function:new i.default(t.CREATE_END_CHECK_KEYWORD),create_trigger:new u.default(t.CREATE_END_CHECK_KEYWORD),create_procedure:new a.default(t.CREATE_END_CHECK_KEYWORD)}},496:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function a(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(754),f=l(n(294)),h=n(11),p=n(664),d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(d,e);var t,n,r,l,f=(r=d,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=c(r);if(l){var n=c(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return a(this,e)});function d(){return o(this,d),f.apply(this,arguments)}return t=d,(n=[{key:"checker",value:function(){return{textChecker:new h.TextCheckTokenInfo(s.DEFAULT_TEXT_CHECK_TOKEN),endChecker:new p.EndCheckTokenInfo(s.DEFAULT_END_SPLITTER)}}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),d}(f.default);t.default=d},660:(e,t,n)=>{function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(754),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lineCount=0}var t,n;return t=e,(n=[{key:"init",value:function(){this.lineCount=0}},{key:"checkEnd",value:function(e,t,n,r,i,u){return/\s/.test(n)?(this.lineCount>0&&n==o.LINE_CHAR?this.lineCount+=1:n==o.LINE_CHAR&&(this.lineCount=1),this.lineCount>2):(this.lineCount=0,r==o.LINE_CHAR&&r==n||";"==n)}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=i},664:(e,t)=>{function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.EndCheckTokenInfo=void 0;var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tokens={},this.tokens=t}var t,r;return t=e,(r=[{key:"put",value:function(e,t){return this.tokens[e]=t,this}},{key:"hasKey",value:function(e){return this.tokens.hasOwnProperty(e)}},{key:"get",value:function(e){var t=this.tokens[e];return t.init(),t}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.EndCheckTokenInfo=r},294:(e,t,n)=>{function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(987),i=n(754),u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cfg=t;var n=this.checker();this.textChecker=n.textChecker,this.endChecker=n.endChecker}var t,n;return t=e,(n=[{key:"checker",value:function(){throw new Error("checker() not implemented by subclass")}},{key:"split",value:function(e,t,n){t=void 0===t?-1:t,n=void 0===n?-1:n;for(var r,u,a=[],c=[],l=0,s=e.length,f=0,h=0,p=0,d="",y="",k=!1,b="",v="",g="",_=null,m=null,C="",E=0,w=!1,O=!1,P=0;P<s;P++){if(r=d,y=(y=(d=(u=e.charAt(P)).toLowerCase())+(P+1<s?e.charAt(P+1):"0")).toLowerCase(),d==i.LINE_CHAR&&(E=P,++f),d==r){if(++l>1e3){console.log("split error");break}}else l=0;if(null==m)if(this.textChecker.hasKey(y)||this.textChecker.hasKey(d))!1!==(m=this.textChecker.get(y)||this.textChecker.get(d)).keepWord&&c.push(u);else{if(c.push(u),/[\s(]/.test(d))k&&(k=!1),g=v,v="";else{if(""==b){if(/[;/!@#$%^&()+=?\-]/.test(d))continue;h=f,p=P-E,k=!0}k&&(b+=d),v+=d}if(!1===k&&null==_&&""!=b?(C=b,_=this.endChecker.hasKey(b)?this.endChecker.get(b):this.endChecker.get("default")):this.endChecker.hasKey(C+"_"+v)&&(C=C+"_"+v,_=this.endChecker.get(C)),!O&&!w&&-1!=t&&f>=t&&n<=P-E&&(w=!0,""==b.trim()&&a.length>0)){var T=e.indexOf(i.LINE_CHAR,P+1);if(T>-1){var j=e.substring(P+1,T),S=(j=(0,o.trim)(j)).charAt(0);if(""!=j&&!/[;/!@#$%^&()+=?\-]/.test(S)){O=!0;continue}}return[a[a.length-1]]}if(_&&_.checkEnd(v,g,d,r,P,e)||P+1==s){var A={command:b,startLine:h,startCharPos:p,endLine:f,endCharPos:P-E,statement:c.join("")};if(w)return[A];if(-1!=t&&h<=t&&t<=f){if(h!=f||t!=f)return[A];if(p<=n&&n<=A.endCharPos)return[A]}a.push(A),b="",c=[],_=null,k=!1}}else{var K=!1;m.checkEnd&&m.checkEnd(r,d,y)?K=!0:m.endToken!=y&&m.endToken!=d||(K=!0),K?(!1===m.keepWord?P+=m.endToken?m.endToken.length-1:0:c.push(u),m=null):!1!==m.keepWord&&c.push(u)}}return a}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=u},11:(e,t)=>{function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.TextCheckTokenInfo=void 0;var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tokens=t}var t,r;return t=e,(r=[{key:"put",value:function(e,t){return this.tokens[e]=t,this}},{key:"hasKey",value:function(e){return this.tokens.hasOwnProperty(e)}},{key:"get",value:function(e){return this.tokens[e]}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.TextCheckTokenInfo=r},784:(e,t)=>{function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.idx=0}var t,r;return t=e,(r=[{key:"init",value:function(){this.idx=0}},{key:"checkEnd",value:function(e,t,n,r,o,i){return"/"==n||";"==n}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=r},591:(e,t)=>{function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.begin=!1,this.endFlag=!1,this.tokenStack=[],this.endCheckKeywords=t}var t,r;return t=e,(r=[{key:"init",value:function(){this.begin=!1,this.endFlag=!1,this.tokenStack=[]}},{key:"checkEnd",value:function(e,t,n,r,o,i){if("begin"==e)this.begin=!0;else if(this.endCheckKeywords.hasOwnProperty(e))"end"==t?this.tokenStack.pop():this.tokenStack.push(this.endCheckKeywords[e]);else if("end"==e){var u=this.tokenStack[this.tokenStack.length-1];u&&""==u.end&&this.tokenStack.pop(),this.endFlag=0==this.tokenStack.length}return!(!this.begin||!this.endFlag||";"!=n)}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=r},390:(e,t)=>{function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.begin=!1,this.endFlag=!1,this.tokenStack=[],this.endCheckKeywords=t}var t,r;return t=e,(r=[{key:"init",value:function(){this.begin=!1,this.endFlag=!1,this.tokenStack=[]}},{key:"checkEnd",value:function(e,t,n,r,o,i){if("begin"==e)this.begin=!0;else if(this.endCheckKeywords.hasOwnProperty(e))"end"==t?this.tokenStack.pop():this.tokenStack.push(this.endCheckKeywords[e]);else if("end"==e){var u=this.tokenStack[this.tokenStack.length-1];u&&""==u.end&&this.tokenStack.pop(),this.endFlag=0==this.tokenStack.length}return!(!this.begin||!this.endFlag||";"!=n)}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=r},449:(e,t)=>{function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.begin=!1,this.endFlag=!1,this.tokenStack=[],this.endCheckKeywords=t}var t,r;return t=e,(r=[{key:"init",value:function(){this.begin=!1,this.endFlag=!1,this.tokenStack=[]}},{key:"checkEnd",value:function(e,t,n,r,o,i){if("begin"==e)this.begin=!0;else if(this.endCheckKeywords.hasOwnProperty(e))"end"==t?this.tokenStack.pop():this.tokenStack.push(this.endCheckKeywords[e]);else if("end"==e){var u=this.tokenStack[this.tokenStack.length-1];u&&""==u.end&&this.tokenStack.pop(),this.endFlag=0==this.tokenStack.length}return!(!this.begin||!this.endFlag||";"!=n)}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=r},820:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(130),t),o(n(368),t),o(n(350),t)},368:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},350:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getSqlParam=void 0;var o=n(987);t.getSqlParam=function(e){if("string"!=typeof e)throw new Error("Invalid sql argument. Expected string, instead got "+r(e));var t=[],n=(e=(0,o.removeAllComment)(e)).match(/[#|$]{(.+?)}/gi);if(n)for(var i=[],u=0;u<n.length;u++){for(var a=n[u].replace(/[$|#|{|}]/gi,""),c=(a=a.replace(/\s/g,"")).split(","),l="",s="",f=0;f<c.length;f++){var h=c[f].split("="),p=h[0];h.length>1?(h[1],"MODE"==p.toUpperCase()&&(s=h[1])):l=p}if(!i.includes(l)){var d={key:l,mode:s};t.push(d),i.push(l)}}return t}},130:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.split=void 0;var i={standard:o(n(496)).default},u={language:"standard",keepComment:!0,findLine:-1,findCharPos:-1};t.split=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!=typeof e)throw new Error("Invalid sql argument. Expected string, instead got "+r(e));var n=Object.assign(Object.assign({},u),t),o=i[n.language];return new o(n).split(e,t.findLine,t.findCharPos)}},987:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeAllComment=t.removeComment=t.removeMultilineComment=t.equalizeWhitespace=t.trim=t.isNumber=void 0,t.isNumber=function(e){return"number"==typeof e},t.trim=function(e){return e.replace(/^\s+|\s+$/g,"")},t.equalizeWhitespace=function(e){return(0,t.trim)(e).replace(/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+/g," ")},t.removeMultilineComment=function(e){return e.replace(/\/\*(.|[\r\n])*?\\*\//gm,"")},t.removeComment=function(e){return e.replace(/--.*\n/gm,"")},t.removeAllComment=function(e){return(0,t.removeComment)((0,t.removeMultilineComment)(e))}}},t={};return function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}(820)})()));
//# sourceMappingURL=varsql.db.util.min.js.map